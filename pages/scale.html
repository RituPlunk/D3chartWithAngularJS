<html>
<head>
<title>D3 Charts</title>
<meta charset="utf-8">
<script type="text/javascript" src="../js/d3.min.js"></script>
</head>
<style>
path {
	stroke: steelblue;
	stroke-width: 2;
	fill: none;
}

line {
	stroke: black;
}

.xGrids {
	stroke: lightgray;
}

.yGrids {
	stroke: lightgray;
}

text {
	font-family: Verdana;
	font-size: 9pt;
}
</style>
<body>
	<script type="text/javascript">
		var margin = 40;
		var data = [ 1000,250,300,200,450];
		var width = 800;
		var height = 500;
		var div = d3.select('body').append('div');
		var svg = div.append('svg:svg').attr('width', width).attr('height',
				height).style('background-color', '#aaa');

		var y = d3.scale.linear().domain([ 0, d3.max(data) ]).range(
				[ 0 + margin, height - margin ]);
		var x = d3.scale.linear().domain([ 0, data.length ]).range(
				[ 0 + margin, width - margin ]);
		console.log(y(1) + " " + x(3));
		var g = svg.append("svg:g").style('stroke', '#fff')
		.style('fill','none');
		var lineGraph = d3.svg.line().x(function(d, i) {
			return x(i);
		}).y(function(d) {
			return height - y(d);
		});
		console.log(lineGraph);
		

		// draw the y axis
		g.append("svg:line").attr("x1", x(0)).attr("y1", y(0)).attr("x2", x(0))
				.attr("y2", y(d3.max(data)))

		// draw the x axis
		g.append("svg:line").attr("x1", x(0)).attr("y1", height - y(0)).attr(
				"x2", width-margin).attr("y2", height - y(0))

		//x-axis label
		g.selectAll(".xLabel").data(x.ticks(5)).enter().append("svg:text")
				.attr("class", "xLabel").text(String).attr("x", function(d) {
					return x(d)
				}).attr("y", height - margin + 15).style('stroke-width', 0)
				.style('fill', '#000').attr("text-anchor", "middle");

		//y-axis label
		g.selectAll(".yLabel").data(y.ticks(5)).enter().append("svg:text")
				.attr("class", "yLabel").text(String).attr("x", margin - 5)
				.attr("y", function(d) {
					return height - y(d)
				}).attr("text-anchor", "end").style('stroke-width', 0).style(
						'fill', '#000');

		//x axis ticks
		g.selectAll(".xTicks").data(x.ticks(10)).enter().append("svg:line")
				.attr("class", "xTicks").attr("x1", function(d) {
					return x(d);
				}).attr("y1", height - y(0)).attr("x2", function(d) {
					return x(d);
				}).attr("y2", height - y(0) + 5);

		// draw the y ticks
		g.selectAll(".yTicks").data(y.ticks(10)).enter().append("svg:line")
				.attr("class", "yTicks").attr("y1", function(d) {
					return y(d);
				}).attr("x1", x(0) - 5).attr("y2", function(d) {
					return y(d);
				}).attr("x2", x(0));

		//draw the x grid
		g.selectAll(".xGrids").data(x.ticks(10)).enter().append("svg:line")
				.attr("class", "xGrids").attr("x1", function(d) {
					return x(d);
				}).attr("y1", y(0)).attr("x2", function(d) {
					return x(d);
				}).attr("y2", y(d3.max(data)));

		// draw the y grid
		g.selectAll(".yGrids").data(y.ticks(5)).enter().append("svg:line")
				.attr("class", "yGrids").attr("y1", function(d) {
					return y(d);
				}).attr("x1", width-margin).attr("y2", function(d) {
					return y(d);
				}).attr("x2", x(0));
		
		//line chart path
		g.append("svg:path").attr("d", lineGraph(data))
		.style('stroke', '#fff	').style('fill', 'none');
	</script>
</body>
</html>